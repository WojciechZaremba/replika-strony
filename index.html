<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Copy of Applying Transforms in Direct2D - Win32 apps | Microsoft Learn -- version 1.1</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js" defer></script>
</head>
<body>
    <div class="contributorsFrame hidden">
        <header>
            <span>Contributors to this article</span>
            <div class="closeContributors">
                <div class="closeIcon">
                    <div class="xUp"></div>
                    <div class="xDown"></div>
                </div>
            </div>
        </header>
        <ul class="contributorsList">
            <li class="contributorElem">
                <a href="#" class="contributorPicture"></a>
                <a href="#1" class="contributorName">QuinnRadich</a>
            </li>
            <li class="contributorElem">
                <a href="#" class="contributorPicture"></a>
                <a href="#2" class="contributorName">DCtheGeek</a>
            </li>
            <li class="contributorElem">
                <a href="#" class="contributorPicture"></a>
                <a href="#3" class="contributorName">john-par</a>
            </li>
            <li class="contributorElem">
                <a href="#" class="contributorPicture"></a>
                <a href="#4" class="contributorName">mcleanbyron</a>
            </li>
            <li class="contributorElem">
                <a href="#" class="contributorPicture"></a>
                <a href="#5" class="contributorName">mijacobs</a>
            </li>
            <li class="contributorElem">
                <a href="#" class="contributorPicture"></a>
                <a href="#6" class="contributorName">drewbatgit</a>
            </li>
            <li class="contributorElem">
                <a href="#" class="contributorPicture"></a>
                <a href="#7" class="contributorName">msatranjr</a>
            </li>
        </ul>
    </div>
    <div class="headers">
        <div class="upperHeader header">
            <div class="hamburgerMobile">
                <div class="hamburgerIcon"></div>
            </div>

            <div class="mobileBackground hidden"></div>
            <div class="mobileNavigation hidden">
                <div class="mobileNavTop">
                    <div class="mobileLearn">
                        <span class="houseIcon">üèöÔ∏è&nbsp</span>
                        <span>Learn</span>
                    </div>
                    <div class="mobileClose">
                        <button class="mobileButton">
                            <div class="closeIcon">
                                <span class="xUp"></span>
                                <span class="xDown"></span>
                            </div>
                        </button>
                    </div>
                </div>
                <div class="mobileNavContent">
                    <div class="mobileNavDevelopment">
                        <div class="mobileBackOrHeader">
                            <h2 class="mobileNavHeaderDev">Windows App Development</h2>
                            <button class="mobileNavBackDev hidden">
                                <span class="backIcon "></span>
                                <span class="">Windows App Development</span>
                            </button>
                        </div>
                        <ul>
                            <li class="mobileNavLi">
                                <a href="http://www.google.pl">Home</a>
                            </li>
                            <li class="mobileNavLi">
                                <button class="mobileNavButton">Explore</button>
                            </li>
                            <li class="mobileNavLi">
                                <button class="mobileNavButton">Development</button>
                            </li>
                            <li class="mobileNavLi">
                                <button class="mobileNavButton">Platforms</button>
                            </li>
                            <li class="mobileNavLi">
                                <a href="#">Troubleshooting</a>
                            </li>
                            <li class="mobileNavLi">
                                <button class="mobileNavButton">Resources</button>
                            </li>
                            <li class="mobileNavLi">
                                <a class="mobileDashButton" href="#">Dashboard</a>
                            </li>
                        </ul>
                    </div>
                    <div class="mobileNavLearn">

                    </div>
                </div>
                <div class="mobileNavBottom">
                    <p class="mobileNavWelcome"><span class="semiBold">Welcome</span> to Microsoft Learn!</p>
                    <div class="mobileNavSingIn">
                        <div class="mobileSign" href="#">Sign in</div>
                    </div>
                </div>
            </div>

            <div class="logo">
                <svg viewBox="0 0 25 25" class="svg">
                    <path d="M11.5216 0.5H0V11.9067H11.5216V0.5Z" fill="#f25022"></path>
                    <path d="M24.2418 0.5H12.7202V11.9067H24.2418V0.5Z" fill="#7fba00"></path>
                    <path d="M11.5216 13.0933H0V24.5H11.5216V13.0933Z" fill="#00a4ef"></path>
                    <path d="M24.2418 13.0933H12.7202V24.5H24.2418V13.0933Z" fill="#ffb900"></path>
                </svg>
            </div>
            <div class="divider"></div>
            <div class="learn">Learn</div>
            <div class="button rightArrow" id="leftArrow"><span class="expandIndicator rotateToLeft"></span></div>
            <div class="expanders expTop">
                <div class="expanderElement expElemTop"> <span>Discover</span> <span class="expandIndicator"></span>
                    <div class="headerPanel expanderList hidden">
                        <div class="headerPanelContent">
                            <ul class="panelCards">
                                <li>
                                    <article>
                                        <a href="#">Documentation</a>
                                        <p>In-depth articles on Microsoft developer tools and technologies</p>
                                    </article>
                                </li>
                                <li>
                                    <article>
                                        <a href="#">Training</a>
                                        <p>Personalized learning paths and courses</p>
                                    </article>
                                </li>
                                <li>
                                    <article>
                                        <a href="#">Credentials</a>
                                        <p>Globally recognized, industry-endorsed credentials</p>
                                    </article>
                                </li>
                                <li>
                                    <article>
                                        <a href="#">Q&A</a>
                                        <p>Technical questions and answers moderated by Microsoft</p>
                                    </article>
                                </li>
                                <li>
                                    <article>
                                        <a href="#">Code Samples</a>
                                        <p>Code sample library for Microsoft developer tools and technologies</p>
                                    </article>
                                </li>
                                <li>
                                    <article>
                                        <a href="#">Assessments</a>
                                        <p>Interactive, curated guidance and recommendations</p>
                                    </article>
                                </li>
                                <li>
                                    <article>
                                        <a href="#">Shows</a>
                                        <p>Thousands of hours of original programming from Microsoft experts</p>
                                    </article>
                                </li>
                            </ul>
                        </div>
                        <section class="headerPanelFeature">
                            <article>
                                <p>Featured assessment</p>
                                <a href="#">It's your AI learning journey</a>
                                <p>Wherever you are in your AI journey, Microsoft Learn meets you where you are and helps you deepen your skills.</p>
                            </article>
                        </section>
                    </div>
                </div>
                <div class="expanderElement expElemTop">Product documentation<span class="expandIndicator"></span>
                    <div class="headerPanel expanderList hidden">
                        <div class="headerPanelContent">
                            <ul class="panelCards panelList">
                                
                                <li><a href="#">ASP.NET</a></li>
                                <li><a href="#">Azure</a></li>
                                <li><a href="#">Dynamics 365</a></li>
                                <li><a href="#">Microsoft 365</a></li>
                                <li><a href="#">Microsoft Edge</a></li>
                                <li><a href="#">Microsoft Entra</a></li>
                                <li><a href="#">Microsoft Graph</a></li>
                                <li><a href="#">Microsoft Intune</a></li>
                                <li><a href="#">Microsoft Purview</a></li>
                                <li><a href="#">Microsoft Teams</a></li>
                                <li><a href="#">.NET</a></li>
                                <li><a href="#">Power Apps</a></li>
                                <li><a href="#">Power Automate</a></li>
                                <li><a href="#">Power BI</a></li>
                                <li><a href="#">Power Platform</a></li>
                                <li><a href="#">PowerShell</a></li>
                                <li><a href="#">SQL</a></li>
                                <li><a href="#">Sysinternals</a></li>
                                <li><a href="#">Visual Studio</a></li>
                                <li><a href="#">Windows</a></li>
                                <li><a href="#">Windows Server</a></li>
                            </ul>
                        </div>
                        <section class="headerPanelFeature">
                            <article>
                                <p>Featured assessment</p>
                                <a href="#">It's your AI learning journey</a>
                                <p>Wherever you are in your AI journey, Microsoft Learn meets you where you are and helps you deepen your skills.</p>
                            </article>
                        </section>
                    </div>
                </div>
                <div class="expanderElement expElemTop">Development languages<span class="expandIndicator"></span>
                    <div class="headerPanel expanderList hidden">
                        <div class="headerPanelContent">
                            <ul class="panelCards panelList">
                                <li><a href="#">C++</a></li>
                                <li><a href="#">C#</a></li>
                                <li><a href="#">DAX</a></li>
                                <li><a href="#">Java</a></li>
                                <li><a href="#">OData</a></li>
                                <li><a href="#">OpenAPI</a></li>
                                <li><a href="#">Powewr Query M</a></li>
                                <li><a href="#">VBA</a></li>
                            </ul>
                        </div>
                        <section class="headerPanelFeature">
                            <article>
                                <p>Featured assessment</p>
                                <a href="#">It's your AI learning journey</a>
                                <p>Wherever you are in your AI journey, Microsoft Learn meets you where you are and helps you deepen your skills.</p>
                            </article>
                        </section>
                    </div>
                </div>
                <div class="expanderElement expElemTop">Topics<span class="expandIndicator"></span>
                    <div class="headerPanel expanderList hidden">
                        <div class="headerPanelContent">
                            <ul class="panelCards panelList">
                                <li><a href="#">Artificial intelligence</a></li>
                                <li><a href="#">Compliance</a></li>
                                <li><a href="#">DevOps</a></li>
                                <li><a href="#">Platform engineering</a></li>
                                <li><a href="#">Security</a></li>
                            </ul>
                        </div>
                        <section class="headerPanelFeature">
                            <article>
                                <p>Featured assessment</p>
                                <a href="#">It's your AI learning journey</a>
                                <p>Wherever you are in your AI journey, Microsoft Learn meets you where you are and helps you deepen your skills.</p>
                            </article>
                        </section>
                    </div>
                </div>
                </div>
                <div class="button rightArrow" id="rightArrow"><div class="expandIndicator rotateToRight"></div></div>
                <div class="searchButton">
                <div class="search"></div>
            </div>
            <div class="signIn">Sign in</div>
        </div>
        <div class="lowerHeader header">
            <div class="navbarBigButton">Windows App Development</div>
            <div class="expanders expBot">
                <div class="expanderElement expElemBot">Explore<span class="expandIndicator expIndSmall"></span>
                    <ul class="expanderList hidden">
                        <li>Desktop app types</li>
                        <li>Windows App SDK</li>
                        <li>Windows UI Library</li>
                        <li>MSIX</li>
                    </ul>
                </div>
                <div class="expanderElement expElemBot">Development<span class="expandIndicator expIndSmall"></span>
                    <ul class="expanderList hidden">
                        <li>Get started</li>
                        <li>Design</li>
                        <li>Develop</li>
                        <li>Deploy</li>
                        <li>Samples</li>
                        </ul>
                </div>
                <div class="expanderElement expElemBot">Platforms<span class="expandIndicator expIndSmall"></span>
                    <ul class="expanderList hidden">
                        <li><button>Desktop apps</button>
                            <ul>
                                <li>WinUI 3</li>
                                <li>Win32</li>
                                <li>WPF</li>
                                <li>Windows Forms</li>
                                <li>UWP</li>
                            </ul>
                        </li>
                        <li>Web</li>
                        <li>Windows IoT</li>
                        <li>Mixed Reality</li>
                        <li>Games</li>
                    </ul>
                </div>
                <div class="expanderElement expElemBot">Troubleshooting</div>
                <div class="expanderElement expElemBot">Resources<span class="expandIndicator expIndSmall"></span>
                    <ul class="expanderList hidden">
                        <li>Downloads</li>
                        <li>Windows Dev Center</li>
                        <li>Windows developer support</li>
                        <li>Windows Insider Program</li>
                        <li>What's new for Windows 11</li>
                        <li>Microsoft Store</li>
                        <li>Windows training</li>
                        <li>Windows on Q&A</li>
                        <li>Windows Developer on Twitter</li>
                    </ul>
                </div>
                
                <div class="expanderElement expElemBot" id="moreButton">More<span class="expandIndicator expIndSmall"></span>   
                    <ul class="expanderList hidden">
                        <li class="moreDropdown"><button>Explore</button></li>
                        <li class="moreDropdown"><button>Development</button></li>
                        <li class="moreDropdown"><button>Platrofms</button></li>
                        <li class="moreDropdown">Troubleshooting</li>
                        <li class="moreDropdown"><button>Resources</button></li>
                        <!-- <li><button>Resources</button>
                            <ul class="hidden">
                                <li>Downloads</li>
                                <li>Windows Dev Center</li>
                                <li>Windows developer support</li>
                                <li>Windows Insider Program</li>
                                <li>What's new for Windows 11</li>
                                <li>Microsoft Store</li>
                                <li>Windows training</li>
                                <li>Windows on Q&A</li>
                                <li>Windows Developer on Twitter</li>
                            </ul>
                        </li>
                        <li>Troubleshooting</li> -->
                        <!-- <li style="display: none"><button>Platforms</button>
                            <ul>
                                <li><button>Desktop apps</button>
                                    <ul>
                                        <li>WinUI 3</li>
                                        <li>Win32</li>
                                        <li>WPF</li>
                                        <li>Windows Forms</li>
                                        <li>UWP</li>
                                    </ul>
                                </li>
                                <li>Web</li>
                                <li>Mised Reality</li>
                                <li>Games</li>
                            </ul>
                        </li>
                        <li style="display: none"><button>Development</button>
                            <ul>
                                <li>Get started</li>
                                <li>Design</li>
                                <li>Develop</li>
                                <li>Deploy</li>
                                <li>samples</li>
                            </ul>
                        </li>
                        <li style="display: none"><button>Explore</button>
                            <ul>
                                <li>Desktop app types</li>
                                <li>Windows App SDK</li>
                                <li>Windows UI Library</li>
                                <li>MSIX</li>
                            </ul>
                        </li>    -->
                    </ul>
                </div>
            </div>
            <div class="dashboard"><span>Dashboard</span></div>
        </div>
    </div>
    <div class="main">
        <div class="column">
            <input class="filterInput" placeholder="Filter by title"></input>
            <div class="tableOfContent">
                <div class="contentChapter lineThin">Get Started with Win32 and C++</div>
                <div class="contentChapter">
                    <div class="chapterIndicatorContainer"><div class="chapterIndicatorIcon"></div></div>
                    <span>Intro to Win32 programming in C++</span>
                    <div class="contentExpanded hidden">
                        <div class="contentElement lineThin">Overview</div>
                        <div class="contentElement lineThin">Overview of the Windows Graphics Architecture</div>
                        <div class="contentElement lineThin">The Desktop Window Manager</div>
                    </div>
                </div>
                <div class="contentChapter">
                    <div class="chapterIndicatorContainer"><div class="chapterIndicatorIcon"></div></div>
                    <span>Module 1. Your First Windows Program</span>
                    <div class="contentExpanded hidden">
                        <div class="contentElement lineThin">Overview</div>
                        <div class="contentElement lineThin">Overview of the Windows Graphics Architecture</div>
                        <div class="contentElement lineThin">The Desktop Window Manager</div>
                    </div>
                </div>
                <div class="contentChapter">
                    <div class="chapterIndicatorContainer"><div class="chapterIndicatorIcon"></div></div>
                    <span>Module 2. Using COM in Your Windows Program</span>
                    <div class="contentExpanded hidden">
                        <div class="contentElement lineThin">Overview</div>
                        <div class="contentElement lineThin">Overview of the Windows Graphics Architecture</div>
                        <div class="contentElement lineThin">The Desktop Window Manager</div>
                    </div>
                </div>
                <div class="contentChapter">
                    <div class="chapterIndicatorContainer"><div class="chapterIndicatorIcon rotateClass"></div></div>
                    Module 3. Windows Graphics
                    <div class="contentExpanded">
                        <div class="contentElement lineThin">Overview</div>
                        <div class="contentElement lineThin">Overview of the Windows Graphics Architecture</div>
                        <div class="contentElement lineThin">The Desktop Window Manager</div>
                        <div class="contentElement lineThin">Retained Mode Versus Immediate Mode</div>
                        <div class="contentElement lineThin">Your First Direct2D Program</div>
                        <div class="contentElement lineThin">Render Targets, Devices, and Resources</div>
                        <div class="contentElement lineThin">Drawing with Direct2D</div>
                        <div class="contentElement lineThin">DPI and Device-Independent Pixels</div>
                        <div class="contentElement lineThin">Using Color in Direct2D</div>
                        <div class="contentElement lineThin activeContent">Applying Transforms in Direct2D</div>
                        <div class="contentElement lineThin">Appendix: Matrix Transforms</div>
                    </div>
                </div>
                <div class="contentChapter">
                    <div class="chapterIndicatorContainer"><div class="chapterIndicatorIcon"></div></div>
                    <span>Module 4. User Input</span>
                    <div class="contentExpanded hidden">
                        <div class="contentElement lineThin">Overview</div>
                        <div class="contentElement lineThin">Overview of the Windows Graphics Architecture</div>
                        <div class="contentElement lineThin">The Desktop Window Manager</div>
                    </div>
                </div>
                <div class="contentChapter">
                    <div class="chapterIndicatorContainer"><div class="chapterIndicatorIcon"></div></div>
                    <span>Get Started with Win32: Sample Code</span>
                    <div class="contentExpanded hidden">
                        <div class="contentElement lineThin">Overview</div>
                        <div class="contentElement lineThin">Overview of the Windows Graphics Architecture</div>
                        <div class="contentElement lineThin">The Desktop Window Manager</div>
                    </div>
                </div>
            </div>
            <div class="pdfContainer">
                <div class="downloadPDF">Download PDF</div>
            </div>
        </div>
        <div class="article">
            <ul class="breadcrumb">
                <div class="detailsContainer">
                    <details class="breadSummary">
                        <summary class="expDots"><span class="dotsIcon">‚Ä¶</span></summary>
                        <div class="popover">
                            <nav class="popNavbar">
                                <ol class="popNavList">
                                    <li class="popElem">
                                        <a href="#">Learn</a></li>
                                    <li class="popElem">
                                        <a href="#">Windows</a></li>
                                    <li class="popElem">
                                        <a href="#">Apps</a></li>
                                    <li class="popElem">
                                        <a href="#">Win32</a></li>
                                    <li class="popElem">
                                        <a href="#">Get Started</a></li>
                                    <li class="popElem">
                                        <a href="#">Get Started with Win32 and C++</a></li>
                                </ol>
                            </nav>
                        </div>
                    </details>
                </div>
                <li><a href="#">Learn</a></li>
                <li><a href="#">Windows</a></li>
                <li><a href="#">Apps</a></li>
                <li><a href="#">Win32</a></li>
                <li><a href="#">Get Started</a></li>
                <li><a href="#">Get Started with Win32 and C++</a></li>
                <div class="editorButtons">
                    <div class="edButton1 edButton dots">.</div><div class="edButton2 edButton dots">.</div><div class="edButton3 edButton dots">.</div>
                    <!-- <div class="edButton1 edButton dots">+</div><div class="edButton2 edButton dots">/</div><div class="edButton3 edButton dots">:</div> -->
                </div>
            </ul>
            <div class="content">
                <!-- <div class="title"></div>
                <div class="metadata"></div>
                <div class="feedbackButton"></div>
                <div class="inThisArticle"></div>
                <div class="shortcuts"></div>
                <p class="paragraph"></p>
                <img src="" alt="">
                <div class="code"></div> -->
                <h1 class="articleTitle">Applying Transforms in Direct2D</h1>
                    <div class="metaContainer">
                        <div class="metaBar">
                            <ul class="metaList">
                                <li>Article</li>
                                <li><time>08/19/2020</time></li>
                                <li><button class="contributors">7 contributors</button></li>
                            </ul>
                        </div>
                        <div class="feedbackMeta">üëç Feedback</div>
                    </div>
                    <nav class="articleNavbar">
                        <h2 class="navbarTitle">In this article</h2>
                        <ol class="artNavList">
                            <li class="artNavElem">
                                <a href="#drawing-clock-hands">Drawing Clock Hands</a>
                            </li>
                            <li class="artNavElem">
                                <a href="#combining-transforms">Combining Transforms</a>
                            </li>
                            <li class="artNavElem">
                                <a href="#next">Next</a>
                            </li>
                        </ol>
                        <p>In <a href="#">Drawing with Direct2D</a>, we saw that the <a href="#"><strong>ID2D1RenderTarget::FillEllipse</strong></a> method draws an ellipse that is aligned to the x- and y-axes. But suppose that you want to draw an ellipse tilted at an angle?</p>
                        <img src="https://learn.microsoft.com/en-us/windows/win32/learnwin32/images/graphics16.png" alt="yellow ellipse">
                        <p>By using transforms, you can alter a shape in the following ways.
                        </p>
                        <ul>
                            <li>Rotation around a point.
                            </li>
                            <li>Scaling.
                            </li>
                            <li>Translation (displacement in the X or Y direction).
                            </li>
                            <li>Skew (also known as shear).
                            </li>
                        </ul>
                        <p>A transform is a mathematical operation that maps a set of points to a new set of points. For example, the following diagram shows a triangle rotated around the point P3. After the rotation is applied, the point P1 is mapped to P1', the point P2 is mapped to P2', and the point P3 maps to itself.
                        </p>
                        <img src="https://learn.microsoft.com/en-us/windows/win32/learnwin32/images/graphics17.png" alt="vectors">
                        <p>Transforms are implemented by using matrices. However, you do not have to understand the mathematics of matrices in order to use them. If you want to learn more about the math, see <a href="">Appendix: Matrix Transforms</a>.
                        </p>
                        <p>To apply a transform in Direct2D, call the <a href="#"><strong>ID2D1RenderTarget::SetTransform</strong></a> method. This method takes a <a href="#"><strong>D2D1_MATRIX_3X2_F</strong></a> structure that defines the transformation. You can initialize this structure by calling methods on the <a href="#"><strong>D2D1::Matrix3x2F</strong></a> class. This class contains static methods that return a matrix for each kind of transform:
                        </p>
                        <ul>
                            <li><a href="#"><strong>Matrix3x2F::Rotation</strong></a>
                            </li>
                            <li><a href="#"><strong>Matrix3x2F::Scale</strong></a>
                            </li>
                            <li><a href="#"><strong>Matrix3x2F::Translation</strong></a>
                            </li>
                            <li><a href="#"><strong>Matrix3x2F::Skew</strong></a>
                            </li>
                        </ul>
                        <p>For example, the following code applies a 20-degree rotation around the point (100, 100).
                        </p>
                        <div class="codeContainer">
                            <div class="codeHeader"><span class="language">C++</span><button># Copy</button></div>
                            <pre><code>
    pRenderTarget->SetTransform(
        D2D1::Matrix3x2F::Rotation(20, D2D1::Point2F(100,100)));
                            </code></pre>
                        </div>
                        <p>The transform is applied to all later drawing operations until you call <a href=""><strong>SetTransform</strong></a> again. To remove the current transform, call SetTransform with the identity matrix. To create the identity matrix, call the <a href="#"><strong>Matrix3x2F::Identity</strong></a> function.
                        </p>
                        <div class="codeContainer">
                            <div class="codeHeader"><span>C++</span><button># Copy</button></div>
                            <pre>
                                <code>
    pRenderTarget->SetTransform(D2D1::Matrix3x2F::Identity());
                            </code></pre>
                            
                        </div>
                        <h2 id="drawing-clock-hands">Drawing Clock Hands
                        </h2>
                        <p>Let's put transforms to use by converting our Circle program into an analog clock. We can do this by adding lines for the hands.
                        </p>
                        <img src="https://learn.microsoft.com/en-us/windows/win32/learnwin32/images/graphics18.png" alt="clock">
                        <p>Instead of calculating the coordinates for the lines, we can calculate the angle and then apply a rotation transform. The following code shows a function that draws one clock hand. The fAngle parameter gives the angle of the hand, in degrees.</p>
                        <div class="codeContainer">
                            <div class="codeHeader"><span>C++</span><button># Copy</button></div>
                            <pre><code>
    void Scene::DrawClockHand(float fHandLength, float fAngle, float fStrokeWidth)
    {
        m_pRenderTarget->SetTransform(
            D2D1::Matrix3x2F::Rotation(fAngle, m_ellipse.point)
                );
    
        // endPoint defines one end of the hand.
        D2D_POINT_2F endPoint = D2D1::Point2F(
            m_ellipse.point.x,
            m_ellipse.point.y - (m_ellipse.radiusY * fHandLength)
            );
    
        // Draw a line from the center of the ellipse to endPoint.
        m_pRenderTarget->DrawLine(
            m_ellipse.point, endPoint, m_pStroke, fStrokeWidth);
    }
                            </code></pre>
                        </div>
                        <p>This code draws a vertical line, starting from the center of the clock face and ending at the point endPoint. The line is rotated around the center of the ellipse by applying a rotation transform. The center point for the rotation is the center of ellipse that forms the clock face.</p>
                        <img src="https://learn.microsoft.com/en-us/windows/win32/learnwin32/images/graphics19.png" alt="rotating">
                        <p>The following code shows how the whole clock face is drawn.
                        </p>
                        <div class="codeContainer">
                            <div class="codeHeader"><span>C++</span><button># Copy</button></div>
                            <pre><code>
    void Scene::RenderScene()
    {
        m_pRenderTarget->Clear(D2D1::ColorF(D2D1::ColorF::SkyBlue));
    
        m_pRenderTarget->FillEllipse(m_ellipse, m_pFill);
        m_pRenderTarget->DrawEllipse(m_ellipse, m_pStroke);
    
        // Draw hands
        SYSTEMTIME time;
        GetLocalTime(&time);
    
        // 60 minutes = 30 degrees, 1 minute = 0.5 degree
        const float fHourAngle = (360.0f / 12) * (time.wHour) + (time.wMinute * 0.5f);
        const float fMinuteAngle =(360.0f / 60) * (time.wMinute);
    
        DrawClockHand(0.6f,  fHourAngle,   6);
        DrawClockHand(0.85f, fMinuteAngle, 4);
    
        // Restore the identity transformation.
        m_pRenderTarget->SetTransform( D2D1::Matrix3x2F::Identity() );
    }
                            </code></pre>
                        </div>
                        <p>You can download the complete Visual Studio project from <a href=""><strong>Direct2D Clock Sample</strong></a>. (Just for fun, the download version adds a radial gradiant to the clock face.)
                        </p>
                        <h2 id="combining-transforms">Combining Transforms
                        </h2>
                        <p>The four basic transforms can be combined by multiplying two or more matrices. For example, the following code combines a rotation with a translation.
                        </p>
                        
                        <div class="codeContainer">
                            <div class="codeHeader"><span>C++</span><button># Copy</button></div>
                            <pre><code>
    const D2D1::Matrix3x2F rot = D2D1::Matrix3x2F::Rotation(20);
    const D2D1::Matrix3x2F trans = D2D1::Matrix3x2F::Translation(40, 10);
    
    pRenderTarget->SetTransform(rot * trans);
                            </code></pre>
                        </div>
                        <p>The <a href=""><strong>Matrix3x2F</strong></a> class provides <a href=""><strong>operator*()</strong></a> for matrix multiplication. The order in which you multiply the matrices is important. Setting a transform (M √ó N) means "Apply M first, followed by N." For example, here is rotation followed by translation:
                        </p>
                        <img src="https://learn.microsoft.com/en-us/windows/win32/learnwin32/images/graphics20.png" alt="translation">
                        <p>Here is the code for this transform:
                        </p>
                        <div class="codeContainer">
                            <div class="codeHeader"><span>C++</span><button># Copy</button></div>
                            <pre><code>
    const D2D1::Matrix3x2F rot = D2D1::Matrix3x2F::Rotation(45, center);
    const D2D1::Matrix3x2F trans = D2D1::Matrix3x2F::Translation(x, 0);
    pRenderTarget->SetTransform(rot * trans);
                            </code></pre>
                        </div>
                        <p>Now compare that transform with a transform in the reverse order, translation followed by rotation.
                        </p>
                        <img src="https://learn.microsoft.com/en-us/windows/win32/learnwin32/images/graphics21.png" alt="rotation">
                        <p>The rotation is performed around the center of the original rectangle. Here is the code for this transform.
                        </p>
                        <p>As you can see, the matrices are the same, but the order of operations has changed. This happens because matrix multiplication is not commutative: M √ó N ‚â† N √ó M.
                        </p>
                        <h2 id="next">Next</h2>
                        <a href="#">Appendix: Matrix Transforms</a>
                        <hr class="hrLine">
                        <section class="feedbackFooter">
                            <h2>Feedback</h2>
                            <p>Was this page helpful?</p>
                            <button>Yes</button>
                            <button>No</button>
                            <div class="feedHelp">
                                <a href="">Provide product feedback
                                </a>
                                <span class="dividerSmall">|</span>
                                <a href="">Get help at Microsoft Q&A
                                </a>
                            </div>
                        </section>
                    </nav>
            </div>
            <div class="asideMobile">
                <hr class="hrLine">
                <h2 class="resources">Additional resources</h2>
                <div class="documentation">Documentation</div>
                <div class="resourcesListContainer">
                    <ul class="resourcesListUl">
                        <li class="resourceLi">
                            <a href="#" class="resLink">Appendix Matrix Transforms - Win32 apps</a>
                            <p class="resText">This topic provides a mathematical overview of matrix transforms for 2-D graphics.</p>
                        </li>
                        <li class="resourceLi">
                            <a href="#" class="resLink">Using Color in Direct2D - Win32 apps</a>
                            <p class="resText">Using Color in Direct2D</p>
                        </li>
                        <li class="resourceLi">
                            <a href="#" class="resLink">Drawing with Direct2D - Win32 apps</a>
                            <p class="resText">After you create your graphics resources, you are ready to draw.</p>
                        </li>
                        <li class="resourceLi hidden">
                            <a href="#" class="resLink">Render Targets, Devices, and Resources - Win32 apps</a>
                            <p class="resText">Render Targets, Devices, and Resources</p>
                        </li>
                        <li class="resourceLi hidden">
                            <a href="#" class="resLink">Your First Direct2D Program - Win32 apps</a>
                            <p class="resText">Let's create our first Direct2D program. The program does not do anything fancy \ 8212; it just draws a circle that fills the client area of the window. But this program introduces many essential Direct2D concepts.</p>
                        </li>
                        <li class="resourceLi hidden">
                            <a href="#" class="resLink">Direct2D Circle Sample - Win32 apps</a>
                            <p class="resText">This sample application shows how to draw a circle using Direct2D.</p>
                        </li>
                        <li class="resourceLi hidden">
                            <a href="#" class="resLink">Direct2D Clock Sample - Win32 apps</a>
                            <p class="resText">This sample application shows how to use transforms in Direct2D to draw the hands of a clock.</p>
                        </li>
                        <li class="resourceLi hidden">
                            <a href="#" class="resLink">Overview of the Windows Graphics Architecture - Win32 apps</a>
                            <p class="resText">Describes the C++/COM graphics APIs in Windows.</p>
                        </li>
                    </ul>
                    <button class="showMore" onclick="handleShowButton()">Show 5 more</button>
                </div>
            </div>
        </div>
        <div class="additionals">
            <h2 class="resources">Additional resources</h2>
            <div class="documentation">Documentation</div>
            <div class="resourcesListContainer">
                <ul class="resourcesListUl">
                    <li class="resourceLi">
                        <a href="#" class="resLink">Appendix Matrix Transforms - Win32 apps</a>
                        <p class="resText">This topic provides a mathematical overview of matrix transforms for 2-D graphics.</p>
                    </li>
                    <li class="resourceLi">
                        <a href="#" class="resLink">Using Color in Direct2D - Win32 apps</a>
                        <p class="resText">Using Color in Direct2D</p>
                    </li>
                    <li class="resourceLi">
                        <a href="#" class="resLink">Drawing with Direct2D - Win32 apps</a>
                        <p class="resText">After you create your graphics resources, you are ready to draw.</p>
                    </li>
                    <li class="resourceLi hidden">
                        <a href="#" class="resLink">Render Targets, Devices, and Resources - Win32 apps</a>
                        <p class="resText">Render Targets, Devices, and Resources</p>
                    </li>
                    <li class="resourceLi hidden">
                        <a href="#" class="resLink">Your First Direct2D Program - Win32 apps</a>
                        <p class="resText">Let's create our first Direct2D program. The program does not do anything fancy \ 8212; it just draws a circle that fills the client area of the window. But this program introduces many essential Direct2D concepts.</p>
                    </li>
                    <li class="resourceLi hidden">
                        <a href="#" class="resLink">Direct2D Circle Sample - Win32 apps</a>
                        <p class="resText">This sample application shows how to draw a circle using Direct2D.</p>
                    </li>
                    <li class="resourceLi hidden">
                        <a href="#" class="resLink">Direct2D Clock Sample - Win32 apps</a>
                        <p class="resText">This sample application shows how to use transforms in Direct2D to draw the hands of a clock.</p>
                    </li>
                    <li class="resourceLi hidden">
                        <a href="#" class="resLink">Overview of the Windows Graphics Architecture - Win32 apps</a>
                        <p class="resText">Describes the C++/COM graphics APIs in Windows.</p>
                    </li>
                </ul>
                <button class="showMore" onclick="handleShowButton()">Show 5 more</button>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="footerButtons">
            <a href="#" class="language">English (United States)</a>
            <div class="privacy">
                <a href="#">
                    <svg role="img" aria-label="California Consumer Privacy Act (CCPA) Opt-Out Icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 14" xml:space="preserve" height="16" width="43" focusable="false">
                        <title>California Consumer Privacy Act (CCPA) Opt-Out Icon</title>
                        <path d="M7.4 12.8h6.8l3.1-11.6H7.4C4.2 1.2 1.6 3.8 1.6 7s2.6 5.8 5.8 5.8z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"></path>
                        <path d="M22.6 0H7.4c-3.9 0-7 3.1-7 7s3.1 7 7 7h15.2c3.9 0 7-3.1 7-7s-3.2-7-7-7zm-21 7c0-3.2 2.6-5.8 5.8-5.8h9.9l-3.1 11.6H7.4c-3.2 0-5.8-2.6-5.8-5.8z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#06f"></path>
                        <path d="M24.6 4c.2.2.2.6 0 .8L22.5 7l2.2 2.2c.2.2.2.6 0 .8-.2.2-.6.2-.8 0l-2.2-2.2-2.2 2.2c-.2.2-.6.2-.8 0-.2-.2-.2-.6 0-.8L20.8 7l-2.2-2.2c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0l2.2 2.2L23.8 4c.2-.2.6-.2.8 0z" style="fill:#fff"></path>
                        <path d="M12.7 4.1c.2.2.3.6.1.8L8.6 9.8c-.1.1-.2.2-.3.2-.2.1-.5.1-.7-.1L5.4 7.7c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0L8 8.6l3.8-4.5c.2-.2.6-.2.9 0z" style="fill:#06f"></path>
                    </svg>
                    <span>Your Privacy Choices</span>
                </a>
            </div>
            <div id="test" class="themeContainer">
                <button class="themeButton">Theme</button>
                <div class="themeListContainer">
                    <ul class="themeList">
                        <li class="themeElem">
                            <button class="themeButton">
                                <svg class="svgTheme"></svg>
                                <span>Light</span>
                            </button>
                        </li>
                        <li class="themeElem">
                            <button class="themeButton">
                                <svg class="svgTheme"></svg>
                                <span>Dark</span>
                            </button>
                        </li>
                        <li class="themeElem">
                            <button class="themeButton">
                                <svg class="svgTheme"></svg>
                                <span>Hight contrast</span>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <ul class="footerLinks">
            <li>
                <a href="#">
                    <button class="cookieButton">Manage cookies</button>
                </a>
            </li>
            <li>
                <a href="#">Previous Versions</a>
            </li>
            <li>
                <a href="#">Blog<span class="squareArrowPlaceholder">&nbsp;D</span></a>
            </li>
            <li>
                <a href="#">Contribute</a>
            </li>
            <li>
                <a href="#">Privacy<span class="squareArrowPlaceholder">&nbsp;D</span></a>
            </li>
            <li>
                <a href="#">Terms of Use</a>
            </li>
            <li>
                <a href="#">Trademarks<span class="squareArrowPlaceholder">&nbsp;D</span></a>
            </li>
            <li>¬© Microsoft 2024</li>
        </ul>
    </div>
</body>
</html>